# import-yml
Import yml file to Bitrix


На данный момент скрипт запускается из корень сайта/local/import-yml/importyml.php  (т.е. корень сайта/каталог/подкаталог/скрипт):
        $_SERVER["DOCUMENT_ROOT"] = realpath(dirname(__FILE__) . "/../..");
Если необходим запуск вида корень сайта/каталог/скрипт, то необходимо в скрипте установить:
        $_SERVER["DOCUMENT_ROOT"] = realpath(dirname(__FILE__) . "/..");

Пусть к файлу импорта marketYandex.yml настраивается в скрипте через переменную:
    $file = $_SERVER['DOCUMENT_ROOT'] . '/local/import-yml/yml/marketYandex.yml';  // импортируемый файл

Пример запуска через терминал: php /home/bitrix/ext_www/domatv.by/local/import-yml/importyml.php

Все основные настройки описаны в самом файле скрипта.


Настройки в админке:

    Добавил разделу(Каталог) пользовательское свойство UF_YAML_ID (строка) для хранения Id каталога/подкаталога из yml-файла,
    используемоего для соответствия Bx_Id и yml_Id.

    Добавил в каталоге Мебель (UF_YAML_ID:  furniture для указания родительского каталога)
    Добавил в каталоге Для ремонта (UF_YAML_ID:  repair для указания родительского каталога)
    Добавил в каталоге Товары для дома и дачи (UF_YAML_ID:  tovary-dlya-doma-i-dachi для указания родительского каталога)

    Элементу инфоблока добавил :
        свойство YAML_ID (ID товара в .yaml), в котором лежит Id товара из yml-файла, используется для связи с Bx id товара.
        свойство PARTNER_PRODUCT (Товар партнера)
